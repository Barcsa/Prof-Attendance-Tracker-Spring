(this["webpackJsonptest-admin"]=this["webpackJsonptest-admin"]||[]).push([[0],{443:function(e,t,a){e.exports=a(765)},448:function(e,t,a){},765:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(31),c=a.n(o),l=(a(448),a(822)),i=a(808),u=a(807),s=a(817),m=a(818),f=function(){return n.a.createElement(s.a,null,n.a.createElement(m.a,{title:"Buna "+localStorage.getItem("name")+". Bine ati venit in panoul de administrare!"}))},d=a(145),p=a(409),b=function(e){return n.a.createElement(p.a,Object.assign({rowsPerPageOptions:[]},e))},g=a(216),E=a(809),h=a(363),v=a.n(h),O=function(e){var t=e.doAction,a=e.title,o=e.content,c=e.label,l=Object(r.useState)(!1),i=Object(d.a)(l,2),u=i[0],s=i[1];return n.a.createElement(r.Fragment,null,n.a.createElement(E.a,{variant:"contained",color:"error",startIcon:n.a.createElement(v.a,null),onClick:function(){return s(!0)}},c),n.a.createElement(g.a,{isOpen:u,title:a,content:o,confirm:"Da",confirmColor:"primary",cancel:"Nu",onConfirm:function(){t(),s(!1)},onClose:function(){return s(!1)}}))},S=a(810),j=a(68),I=a(811),y=a(815),w=a(408),P=a(796),A=a(813),k=a(812),N=a(803),x=a(814),T=a(816),z=a(804),C=a(820),D=a(821),_=function(e){localStorage.getItem("profesorId"),localStorage.getItem("role");var t=Object(r.useState)(null),a=Object(d.a)(t,2);a[0],a[1];console.log(localStorage);return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,Object.assign({filters:n.a.createElement(J,null),title:"Cursuri"},e,{bulkActions:!1,pagination:n.a.createElement(b,null)}),n.a.createElement(j.a,{medium:n.a.createElement(I.a,{rowClick:"edit"},n.a.createElement(y.a,{source:"numeCurs",sortable:!1,label:"Nume curs"}),n.a.createElement(y.a,{source:"specializare",sortable:!1,label:"Specializare"}),n.a.createElement(y.a,{source:"an",sortable:!1,label:"An"}),n.a.createElement(y.a,{source:"profesorResp.name",sortable:!1,label:"Profesor"}))})))},L=function(e){e.record;return n.a.createElement("span",null,"Editare Curs")},R=function(e){return n.a.createElement(w.a,e,n.a.createElement(P.a,null),"\xa0\xa0",n.a.createElement(O,{label:"Sterge curs",doAction:function(){return V(e)},title:"Sterge curs",content:"Sunteti sigur ca doriti sa stergeti aceast curs?"}))},V=function(e){var t=e.record,a=new Request("http://localhost:8000/cursuri/"+(void 0===t?{}:t).id+"/delete",{method:"GET",headers:{"X-Authorization":"Bearer "+localStorage.getItem("token"),"Content-type":"application/json; charset=UTF-8"}});fetch(a).then((function(e){document.location.href="#/cursuri/"}))},J=function(e){return n.a.createElement(A.a,e,"ROLE_ADMIN"===localStorage.getItem("role")&&n.a.createElement(k.a,{label:"Profesor",source:"profesor",reference:"profesori",allowEmpty:!0,alwaysOn:!0},n.a.createElement(N.a,{optionText:"name",optionValue:"id"})))},F=function(e){return n.a.createElement(x.a,Object.assign({title:n.a.createElement(L,null)},e),n.a.createElement(T.a,{redirect:"list",toolbar:n.a.createElement(R,null)},n.a.createElement(k.a,{validate:Object(z.b)(),label:"Profesor",source:"profesorId",reference:"profesori"},n.a.createElement(N.a,{optionValue:"id",optionText:"name"})),n.a.createElement(C.a,{validate:Object(z.b)(),source:"numeCurs",label:"Nume curs"}),n.a.createElement(C.a,{validate:Object(z.b)(),source:"an",label:"An universitar"}),n.a.createElement(C.a,{validate:Object(z.b)(),source:"specializare",label:"Specializare"})))},B=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,Object.assign({title:"Adauga curs"},e),n.a.createElement(T.a,{redirect:"list",toolbar:n.a.createElement(R,null)},n.a.createElement(k.a,{validate:Object(z.b)(),label:"Profesor",source:"profesorId",reference:"profesori"},n.a.createElement(N.a,{optionValue:"id",optionText:"name"})),n.a.createElement(C.a,{validate:Object(z.b)(),source:"numeCurs",label:"Nume curs"}),n.a.createElement(C.a,{validate:Object(z.b)(),source:"an",label:"An universitar"}),n.a.createElement(C.a,{validate:Object(z.b)(),source:"specializare",label:"Specializare"}))))},M=function(e){return n.a.createElement(S.a,Object.assign({title:"Profesori"},e,{bulkActions:!1,pagination:n.a.createElement(b,null)}),n.a.createElement(j.a,{medium:n.a.createElement(I.a,{rowClick:"edit"},n.a.createElement(y.a,{source:"name",label:"Nume"}),n.a.createElement(y.a,{source:"mail",label:"Adresa mail"}),n.a.createElement(y.a,{source:"phone",label:"Numar de telefon"}))}))},q=function(){return n.a.createElement("span",null,"Administreaza Profesor")},U=function(e){return n.a.createElement(w.a,e,n.a.createElement(P.a,null))},G=function(e){return n.a.createElement(x.a,Object.assign({title:n.a.createElement(q,null)},e),n.a.createElement(T.a,{toolbar:n.a.createElement(U,null),redirect:"list"},n.a.createElement(C.a,{validate:Object(z.b)(),source:"name",label:"Nume"}),n.a.createElement(C.a,{validate:Object(z.b)(),source:"phone",label:"Numar de telefon"}),n.a.createElement(y.a,{source:"mail",label:"Email"})))},X=function(e){return n.a.createElement(D.a,Object.assign({title:"Adauga profesor"},e),n.a.createElement(T.a,{redirect:"list"},n.a.createElement(C.a,{validate:Object(z.b)(),source:"name",label:"Nume"}),n.a.createElement(C.a,{validate:Object(z.b)(),source:"phone",label:"Numar de telefon"}),n.a.createElement(C.a,{validate:[Object(z.b)(),Object(z.a)()],source:"mail",label:"Email"})))},H=function(e){localStorage.getItem("profesorId"),localStorage.getItem("role");var t=Object(r.useState)(null),a=Object(d.a)(t,2);a[0],a[1];console.log(localStorage);return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,Object.assign({filters:n.a.createElement(Q,null),title:"Evidente"},e,{bulkActions:!1,pagination:n.a.createElement(b,null)}),n.a.createElement(j.a,{medium:n.a.createElement(I.a,{rowClick:"edit"})})))},W=function(e){e.record;return n.a.createElement("span",null,"Editare evidenta")},$=function(e){return n.a.createElement(w.a,e,n.a.createElement(P.a,null),"\xa0\xa0",n.a.createElement(O,{label:"Sterge evidenta",doAction:function(){return K(e)},title:"Sterge evidenta",content:"Sunteti sigur ca doriti sa stergeti aceasta evidenta?"}))},K=function(e){var t=e.record,a=new Request("http://localhost:8000/evidente/"+(void 0===t?{}:t).id+"/delete",{method:"GET",headers:{"X-Authorization":"Bearer "+localStorage.getItem("token"),"Content-type":"application/json; charset=UTF-8"}});fetch(a).then((function(e){document.location.href="#/evidente/"}))},Q=function(e){return n.a.createElement(A.a,e,"ROLE_ADMIN"===localStorage.getItem("role")&&n.a.createElement(k.a,{label:"Profesor",source:"profesor",reference:"profesori",allowEmpty:!0,alwaysOn:!0},n.a.createElement(N.a,{optionText:"name",optionValue:"id"})))},Y=function(e){return n.a.createElement(x.a,Object.assign({title:n.a.createElement(W,null)},e),n.a.createElement(T.a,{redirect:"list",toolbar:n.a.createElement($,null)}))},Z=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,Object.assign({title:"Adauga evidenta"},e),n.a.createElement(T.a,{redirect:"list",toolbar:n.a.createElement($,null)})))},ee=a(805),te=a(89),ae=function(){return n.a.createElement(s.a,null,n.a.createElement(te.a,{title:"Not Found"}),n.a.createElement(ee.a,null,n.a.createElement("h1",null,"404: Page not found")))},re=a(407),ne=a(389),oe=a.n(ne),ce=a(388),le=a.n(ce),ie=a(390),ue=a.n(ie),se=a(231),me=function(e,t){if(e===se.d){var a=t.username,r=t.password,n=new Request("http://localhost:8000/api/auth/login",{method:"POST",body:JSON.stringify({username:a,password:r}),headers:new Headers({"Content-Type":"application/json"})});return fetch(n).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.token,a=e.role,r=e.profesorId,n=e.name,o=e.email;localStorage.setItem("token",t),localStorage.setItem("userId",a),localStorage.setItem("role",a),localStorage.setItem("email",o),localStorage.setItem("name",n),localStorage.setItem("profesorId",r)}))}if(e===se.e)return localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("role"),localStorage.removeItem("email"),localStorage.removeItem("name"),localStorage.removeItem("profesorId"),Promise.resolve();if(e===se.b){var o=t.status;return 401===o||403===o?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()}if(e===se.a)return localStorage.getItem("token")?Promise.resolve():Promise.reject();if(e===se.c){var c=localStorage.getItem("role");return c?Promise.resolve(c):Promise.reject()}return Promise.resolve},fe=a(107),de=a(172),pe=a.n(de),be=a(283),ge=a(173),Ee=a(14),he=a(806);function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(a,!0).forEach((function(t){Object(fe.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Se="http://localhost:8000",je=function(){var e=Object(be.a)(pe.a.mark((function e(t,a,r){var n,o,c,l,i,u;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=localStorage.getItem("role"),console.log(n),console.log(localStorage),e.t0=t,e.next=e.t0===Ee.e?6:e.t0===Ee.d?6:e.t0===Ee.g?26:e.t0===Ee.h?27:e.t0===Ee.a?28:e.t0===Ee.b?29:e.t0===Ee.c?30:32;break;case 6:if("ROLE_PROFESOR"!==n){e.next=20;break}if(o=localStorage.getItem("profesorId"),"cursuri"!==a){e.next=12;break}return e.abrupt("return",{url:"".concat(Se,"/api/").concat(a,"/profesor/").concat(o)});case 12:if("cursuri"!==a){e.next=17;break}return c={filter:JSON.stringify(r.filter)},e.abrupt("return",{url:"".concat(Se,"/api/").concat(a,"/profesor/").concat(o,"?").concat(Object(ge.stringify)(c))});case 17:if("evidente"!==a){e.next=20;break}return l={filter:JSON.stringify(r.filter)},e.abrupt("return",{url:"".concat(Se,"/api/").concat(a,"/profesor/").concat(o,"?").concat(Object(ge.stringify)(l))});case 20:if("cursuri"!==a){e.next=25;break}return i={filter:JSON.stringify(r.filter)},localStorage.setItem("profesorId",r.filter.profesor),console.log(r.filter.profesor),e.abrupt("return",{url:"".concat(Se,"/api/").concat(a,"?").concat(Object(ge.stringify)(i))});case 25:return e.abrupt("return",{url:"".concat(Se,"/").concat(a)});case 26:return e.abrupt("return",{url:"".concat(Se,"/").concat(a,"/").concat(r.id),options:{method:"GET",body:JSON.stringify(r.data)}});case 27:return e.abrupt("return",{url:"".concat(Se,"/api/").concat(a,"/").concat(r.id),options:{method:"PUT",body:JSON.stringify(r.data)}});case 28:return e.abrupt("return",{url:"".concat(Se,"/api/").concat(a),options:{method:"POST",body:JSON.stringify(r.data)}});case 29:return e.abrupt("return",{url:"".concat(Se,"/api/").concat(a,"/").concat(r.id),options:{method:"DELETE"}});case 30:return u={filter:JSON.stringify({id:r.id})},e.abrupt("return",{url:"".concat(Se,"/").concat(a,"?").concat(Object(ge.stringify)(u)),options:{method:"DELETE"}});case 32:throw new Error("Unsupported fetch action type ".concat(t));case 33:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),Ie=function(e,t,a){var r=e.json;switch(t){case Ee.d:return{data:r.map((function(e){return e})),total:1};case Ee.a:return{data:Oe({},a.data,{id:r.id})};case Ee.c:return{data:r||[]};default:return{data:r}}},ye=function(){var e=Object(be.a)(pe.a.mark((function e(t,a,r){var n,o,c,l,i,u;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=he.a.fetchJson,e.next=3,je(t,a,r);case 3:return o=e.sent,c=o.url,l=o.options,(i=void 0===l?{}:l).headers||(i.headers=new Headers({Accept:"application/json"})),u=localStorage.getItem("token"),i.headers.set("X-Authorization","Bearer "+u),e.abrupt("return",n(c,i).then((function(e){return Ie(e,t,a)})));case 11:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),we=a(286),Pe=a.n(we),Ae=a(406),ke=a.n(Ae),Ne=a(112),xe=a.n(Ne),Te=Object(re.a)({palette:{primary:le.a,secondary:oe.a,error:ue.a,contrastThreshold:3,tonalOffset:.2}}),ze=function(){return n.a.createElement(l.a,{backgroundImage:""})},Ce={ro:{ra:{notification:{http_error:"Eroare de conexiune. Va rugam sa mai incercati."},action:{save:"Salveza",delete:"Sterge",show:"Vizualizeaza",create:"Adauga",cancel:"Anuleaza",edit:"Administreaza",list:"Vizualizeaza",export:"Exporta",search:"Cauta",refresh:"Actualizeaza"},boolean:{true:"Da",false:"Nu",null:""},page:{create:"Adauga %{name}",dashboard:"Pagina principala",error:"Ceva nu a mers bine. Va rugam sa mai incercati",loading:"Se incarca",not_found:"Nu a fost gasit"},auth:{auth_check_error:"Va rugam sa va autentificati pentru a continua",user_menu:"Profil",username:"Nume utilizator",password:"Parola",sign_in:"Autentificare",sign_in_error:"Autentificare esuata! Va rugam sa mai incercati.",logout:"Deconectare"},validation:{required:"Necesar",minLength:"Lungimea trebuie sa fie de cel putin %{min} caractere",maxLength:"Lungimea nu poate fi mai mare de %{max} caractere",minValue:"Trebuie sa fie cel putin %{min}",maxValue:"Trebuie sa fie cel mult %{max} sau mai putin",number:"Trebuie sa fie un numar",email:"Trebuie sa fie un email valid",oneOf:"Trebuie sa fie una dintre: %{options}",regex:"Trebuie sa se potriveasca cu formatul: %{pattern}"}}},en:xe.a},De=function(e){return Ce[e]},_e=function(){return n.a.createElement(i.a,{locale:"ro",i18nProvider:De,loginPage:ze,theme:Te,catchAll:ae,dashboard:f,dataProvider:ye,title:"Panou administrare",authProvider:me},(function(e){return[n.a.createElement(u.a,{name:"cursuri",list:_,edit:"ROLE_ADMIN"===e?F:null,create:"ROLE_ADMIN"===e?B:null,options:{label:"Cursuri"},icon:Pe.a}),n.a.createElement(u.a,{name:"evidente",list:H,edit:Y,create:Z,options:{label:"Evidente"},icon:Pe.a}),"ROLE_ADMIN"===e?n.a.createElement(u.a,{name:"profesori",list:M,edit:G,create:X,options:{label:"Profesori"},icon:ke.a}):null]}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[443,1,2]]]);
//# sourceMappingURL=main.bca410d7.chunk.js.map